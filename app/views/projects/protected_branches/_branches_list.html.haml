%h5.prepend-top-0
  Already Protected (#{@protected_branches.size})
- if @protected_branches.empty?
  %p.settings-message.text-center
    No branches are protected, protect a branch with the form above.
- else
  - can_admin_project = can?(current_user, :admin_project, @project)
  .table-responsive
    %table.table.protected-branches-list
      %colgroup
        %col{ width: "30%" }
        %col{ width: "30%" }
        %col{ width: "25%" }
        - if can_admin_project
          %col
      %thead
        %tr
          %th Branch
          %th Developers Can Push
          - if can_admin_project
            %th
      %tbody
        - @protected_branches.each do |protected_branch|
          - @url = namespace_project_protected_branch_path(@project.namespace, @project, protected_branch)
          %tr
            %td
              = link_to(protected_branch.name, namespace_project_protected_branch_path(@project.namespace, @project, protected_branch))
              - if @project.root_ref?(protected_branch.name)
                %span.label.label-info.prepend-left-5 default
            %td
              = check_box_tag("developers_can_push", protected_branch.iid, protected_branch.developers_can_push, data: { url: @url })
            - if can_admin_project
              %td
                = link_to 'Unprotect', [@project.namespace.becomes(Namespace), @project, protected_branch], data: { confirm: 'Branch will be writable for developers. Are you sure?' }, method: :delete, class: "btn btn-warning btn-sm pull-right"

  = paginate @protected_branches, theme: 'gitlab'
